RewriteEngine On
RewriteBase /api/

# Handle CORS preflight requests
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=204,L]

# API routing rules
RewriteRule ^health$ health.php [L]

# Auth routes
RewriteRule ^auth/register$ auth/register.php [L]
RewriteRule ^auth/login$ auth/login.php [L]
RewriteRule ^auth/me$ auth/me.php [L]
RewriteRule ^auth/logout$ auth/logout.php [L]

# User routes
RewriteRule ^user/profile$ user/profile.php [L]
RewriteRule ^user/uploads$ user/uploads.php [L]

# Video routes
RewriteRule ^video/list$ video/list.php [L]
RewriteRule ^video/details$ video/details.php [L]
RewriteRule ^video/upload$ video/upload.php [L]
RewriteRule ^video/like$ video/like.php [L]
RewriteRule ^video/comment$ video/comment.php [L]

# Shorts routes
RewriteRule ^shorts/list$ shorts/list.php [L]
RewriteRule ^shorts/upload$ shorts/upload.php [L]

# Admin routes
RewriteRule ^admin/users$ admin/users.php [L]
RewriteRule ^admin/videos$ admin/videos.php [L]
